{% extends "base.html" %}
{% load static %}

{% block container %}
    <div id="vue_app">
        <div class="row wow fadeIn">
            <div class="col-md-6 mb-4">
                <img src="{{ product.get_main_image_url  }}" class="img-fluid" alt="{{ product.slug }}">
            </div>

            <div class="col-md-6 mb-4">
                <div class="p-4">
                    {# {% include "../components/product/badges.html" %} #}

                    <h3>{{ product.name }}</h3>

                    <p class="lead">
                        <span class="mr-1">
                            <del>$200</del>
                        </span>
                        <span>$100</span>
                    </p>

                    <p class="lead font-weight-bold">Description</p>

                    <p>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. 
                        Et dolor suscipit libero eos atque quia ipsa
                        sint voluptatibus!
                        Beatae sit assumenda asperiores iure at maxime atque 
                        repellendus maiores quia sapiente.
                    </p>

                    <div class="cart-button">
                        <cartbutton />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <!-- MORE -->
    {% include "../components/product/more.html" %}
{% endblock %}

{% block vuejs_scripts %}
    {{ vue_product|json_script:"vue_product" }}
    <script>
        var imagescomponent = {
            props: ["images"],
        }

        var cartbutton = {
            props: ["product"],
            template: "\
            <form @submit.prevent='addtocart' class='d-flex justify-content-left'>\
                <input v-model='quantity' type='number' aria-label='Search' \
                                            class='form-control' style='width: 100px'>\
                <button class='btn btn-primary btn-md my-0 p'\
                                             :class='instock' type='submit'>Add to cart\
                    <i class='fas fa-shopping-cart ml-1'></i>\
                </button>\
            </form>\
            ",
            data() {
                return {
                    quantity: 1
                }
            },
            computed: {
                instock() {
                    return 
                }
            },
            methods: {
                addtocart: function() {
                    var formdata = new FormData()
                    formdata.append("quantity", this.$data.quantity)
                }
            }
        }
        var productapp = new Vue({
            el: "#vue_app",
            components: {cartbutton, imagescomponent},
            data() {
                return {
                    product: undefined
                }
            },
            beforeMount() {
                return this.$data.product = JSON.parse($("#vue_product").text())
            }
        })
    </script>
{% endblock %}