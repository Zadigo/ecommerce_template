{% extends "layouts/modal.html" %}
{% load i18n cache %}

{% block modal_id %}associate_new_image{% endblock %}

{% block modal_title %}
    {% trans "Associer des images" %}
{% endblock %}

{% block modal_fade %}bottom{% endblock %}

{% block modal_class %}
    modal-full-height modal-bottom modal-notify modal-danger
{% endblock %}

{% block modal_body %}
    {% comment "Django image iteration" %}
        <div class="row">
            {% for image in images %}
                <div class="col-2">
                    <div class="custom-control custom-checkbox image-selector">
                        <input type="checkbox" id="id_{{ forloop.counter }}" class="custom-control-input">
                        <label class="custom-control-label" for="id_{{ forloop.counter }}">
                            {% if image.image_url %}
                                <img src="{{ image.image_url }}" class="img-fluid mt-1">
                            {% else %}
                                <img src="{{ image.url }}" class="img-fluid mt-1">
                            {% endif %}
                        </label>
                    </div>
                </div>
            {% endfor %}            
        </div>
    {% endcomment %}
    
    {% cache 10 allimages %}
        <list-images-component @selectimage="temporaryselection" :allimages="allimages" />
    {% endcache %}
{% endblock %}

{% block modal_footer %}
    <div class="modal-footer">
        <a role="button" class="btn btn-outline-danger waves-effect" data-dismiss="modal">
            {% trans "Annuler" %}
        </a>
        <modal-confirm-button @associateimages="confirmassociation" :hasselection="hasselection" />
    </div>
{% endblock %}
